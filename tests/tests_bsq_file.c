/*
** EPITECH PROJECT, 2022
** BSQ [WSL: fedora]
** File description:
** tests_bsq_file
*/

#include <criterion/criterion.h>
#include <criterion/redirect.h>
#include "my.h"
#include "bsq.h"

void redirect_all_std(void)
{
    cr_redirect_stdout();
    cr_redirect_stderr();
}

Test(bsq_file, map1, . init = redirect_all_std) {
    bsq_file("./assets/map1.txt");
    cr_assert_stdout_eq_str(
        ".o................................................................................\n"
        ".....................o............oooooooooooooooooooooooo........oo..............\n"
        "........o.........................oooooooooooooooooooooooo........................\n"
        ".............................................o....................................\n"
        "...o........o...........o...................................o............o........\n"
        "......ooo.........ooo....................................................o........\n"
        "......ooo.........ooo..................ooo...........o...................o........\n"
        "......ooo.........ooo.............................................................\n"
        "......ooo.........ooo...o.........................................................\n"
        "......ooo.........ooo.............................................................\n"
        "......ooo.........ooo.............................................................\n"
        "..oo..ooo.........ooo...................................o............oooo.........\n"
        "......ooo.........ooo...........o......o..........................................\n"
        "........o........o...........................................................oo...\n"
        ".........o....................................................o........o..........\n"
        ".............................ooo...............ooo.............o.......o..........\n"
        ".............................oo.................oo..............o......o.......o..\n"
        "..........o...........o......o...................o......o........o................\n"
        "..........................................................o.......................\n"
        "....................................o.....................o......o...........o....\n"
        "...........o.........................oo...................o.....o.................\n"
        "..................o....................o..............o.........o.....ooo.o.......\n"
        ".......................o................o.......................o...o.............\n"
        ".............o..................................................o.................\n"
        ".......oo......o......o......oo.................oo..........................o....o\n"
        ".................oo..........oo...o......ooo....oo.......o..............o.........\n"
        ".........o.........o.........oo.................oo.............o..o...............\n"
        "....................o........oo.................oo................................\n"
        ".....................o.......oo.................oo..............o.........o.......\n"
        "..............o..............oo.................oo.......o...............o...o....\n"
        ".............................oo.................oo...............o......o.........\n"
        ".........oo......o...........oo.................oo.....................o..........\n"
        ".....ooooooooo.o.o....................................................o...........\n"
        "...............o..o.......................................................o.......\n"
        "..............o.............................................o.................o...\n"
        "...................o...........o...................o.....................o....o...\n"
        ".....o...o.....................................................o........o.........\n"
        "....o....o.............................................................o..........\n"
        "...o....o.............................o..o.o.................o....................\n"
        "..o...............................................................................\n"
        ".o................................................................................\n"
        ".....................o..............ooooooooo..........ooo........oo..............\n"
        "........o.........................ooo........oooooooooo...........................\n"
        ".............................................o....................................\n"
        "...o........o...........o...................................o............o........\n"
        "......o...........ooo....................................................o........\n"
        "......o.............o..................ooo...........o...................o........\n"
        "......o.o.........ooo.............................................................\n"
        "......oo..........ooo...o.........................................................\n"
        ".......o..........oo..............................................................\n"
        ".......oo.........ooo.............................................................\n"
        "..oo...oo...............................................o............oooo.........\n"
        "......ooo.........ooo...........o......o..........................................\n"
        "........o........o...........................................................oo...\n"
        ".........o....................................................o........o..........\n"
        ".............................ooo...............ooo.............o.......o..........\n"
        ".............................ooxxxxxxxxxxxxxxxxxoo..............o......o.......o..\n"
        "..........o...........o......o.xxxxxxxxxxxxxxxxx.o......o........o................\n"
        "...............................xxxxxxxxxxxxxxxxx..........o.......................\n"
        "...............................xxxxxxxxxxxxxxxxx..........o......o...........o....\n"
        "...........o...................xxxxxxxxxxxxxxxxx..........o.....o.................\n"
        "..................o............xxxxxxxxxxxxxxxxx......o.........o.....ooo.o.......\n"
        ".......................o.......xxxxxxxxxxxxxxxxx................o...o.............\n"
        ".............o.................xxxxxxxxxxxxxxxxx................o.................\n"
        ".......oo......o......o......ooxxxxxxxxxxxxxxxxxoo..........................o....o\n"
        ".................oo..........ooxxxxxxxxxxxxxxxxxoo.......o..............o.........\n"
        ".........o.........o.........ooxxxxxxxxxxxxxxxxxoo.............o..o...............\n"
        "....................o........ooxxxxxxxxxxxxxxxxxoo................................\n"
        ".....................o.......ooxxxxxxxxxxxxxxxxxoo..............o.........o.......\n"
        "..............o..............ooxxxxxxxxxxxxxxxxxoo.......o...............o...o....\n"
        ".............................ooxxxxxxxxxxxxxxxxxoo...............o......o.........\n"
        ".........oo......o...........ooxxxxxxxxxxxxxxxxxoo.....................o..........\n"
        ".....ooooooooo.o.o.............xxxxxxxxxxxxxxxxx......................o...........\n"
        "...............o..o.......................................................o.......\n"
        "..............o.............................................o.................o...\n"
        "...................o...........o...................o.....................o....o...\n"
        ".....o...o.....................................................o........o.........\n"
        "....o....o.............................................................o..........\n"
        "...o....o.............................o..o.o.................o....................\n"
        "..o...............................................................................\n"
        "...o....o.............................o..o.o.................o....................\n"
        "..o...............................................................................\n");
}

Test(bsq_file, map2, . init = redirect_all_std) {
    bsq_file("./assets/map2.txt");
    cr_assert_stdout_eq_str(
        "............................................................o\n"
        ".o...........................................................\n"
        ".....................o............o..........................\n"
        "........o....................................o...............\n"
        ".............................................o...............\n"
        "...o....................o...................................o\n"
        ".............................................................\n"
        ".......................................ooo...................\n"
        "..................ooo........................................\n"
        ".............................................................\n"
        ".............................................................\n"
        ".............................................................\n"
        "........................................................o....\n"
        ".......................................o.....................\n"
        ".................o...................xxxxxxxxxxxxxxxxxx......\n"
        ".........o...........................xxxxxxxxxxxxxxxxxx......\n"
        ".....................................xxxxxxxxxxxxxxxxxx......\n"
        ".....................................xxxxxxxxxxxxxxxxxx......\n"
        "..........o...........o..............xxxxxxxxxxxxxxxxxx......\n"
        ".....................................xxxxxxxxxxxxxxxxxx......\n"
        ".....................................xxxxxxxxxxxxxxxxxx......\n"
        ".....................................xxxxxxxxxxxxxxxxxx......\n"
        "..................o..................xxxxxxxxxxxxxxxxxx.o....\n"
        ".....................................xxxxxxxxxxxxxxxxxx......\n"
        ".....................................xxxxxxxxxxxxxxxxxx......\n"
        ".......oo............................xxxxxxxxxxxxxxxxxx......\n"
        ".....................................xxxxxxxxxxxxxxxxxx......\n"
        ".........o...........................xxxxxxxxxxxxxxxxxx......\n"
        ".....................................xxxxxxxxxxxxxxxxxx......\n"
        ".....................................xxxxxxxxxxxxxxxxxx......\n"
        "..............o.....................oxxxxxxxxxxxxxxxxxx......\n"
        ".....................................xxxxxxxxxxxxxxxxxx......\n");
}

Test(bsq_file, map3, . init = redirect_all_std) {
    bsq_file("./assets/map3.txt");
    cr_assert_stdout_eq_str(
        "xxxxx\n"
        "xxxxx\n"
        "xxxxx\n"
        "xxxxx\n"
        "xxxxx\n");
}

Test(bsq_file, shape, . init = redirect_all_std, .exit_code = 84) {
    bsq_file("./assets/shape.txt");
    cr_assert_stderr_eq_str("Invalid map format\n");
}
